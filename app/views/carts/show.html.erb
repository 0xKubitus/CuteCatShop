<div class="container pt-5">
  <div class="row">
	<div class="col-md-12">
	  <h1>Cart (<%= current_user.cart.items.length %>)</h1>
	  <% if @current_user.cart.items.length < 1 %>
		<p>Your cart is empty.</p>
	  <% else %>
		<table class="table table-striped">
		  <thead>
			<tr>
			  <th>Product</th>
			  
			  <th>Price</th>

			  <th></th>
			  
			</tr>
		  </thead>
		  <tbody>
			<% @current_user.cart.items.each do |item| %>
			  <tr>
				<td><%= item.title %></td>
				
				<td><%= item.price %>0€ </td>
				
				<td>
				  <%= link_to "Remove", cart_items_path+"?item=#{item.id}", method: :delete, class: "btn btn-outline-danger" %> </td>
			  </tr>
			<% end %>
		  </tbody>
		</table>
		<p>
		  <strong>Total: <%= @total %>0€</strong>
		</p>
		<% if @current_user.cart.items.length > 0 %>
		  <%= link_to 'Checkout', new_order_path+"?total=#{@total}", class:"btn btn-primary" %>
		<% else %>
		  <%= link_to 'Checkout', new_order_path+"?total=#{@total}", class:"btn btn-primary" %>
		<% end %>
	  <% end %>
	</div>
  </div>
<h1 class= "pt-5">Panier</h1>


<!-- Code de Julien  --> 
<ul>
  <li>
    <strong>Infos sur le current_user :</strong><br/>
    Cart du current_user : <%= current_user.cart.id %> [current_user.cart.id]<br/>
    Nombre d'objets dedans : <%= current_user.cart.items.length %> [current_user.cart.items.length]<br/>


    Total des prix des items de ce cart : <%= @total %> €.
  </li>
  <li>
      <strong>Partie terminée : retirer un item du panier</strong><br/>
      <% current_user.cart.cart_items.each do |cart_item| %>
        Cart_item n° <%= cart_item.id %> <%= cart_item %> <%= cart_item.item.title %> <%= link_to "Retirer du panier", cart_item_path(cart_item), method: :delete %> <br/>
      <% end %>
  </li>
  <li>
   <%= link_to 'Checkout', new_order_path+"?total=#{@total}", class:"btn btn-primary" %>
  </li>
</ul>


<!-- Fin du code de Julien -->

